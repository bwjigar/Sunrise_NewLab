@{
    ViewBag.Title = "Manage User";
    ViewBag.ClassName = "search-contnt";
    <link href="~/Content/css/daterangepicker.css" rel="stylesheet" />
}
<style>
    .apifilter .table tbody tr td {
        padding: 5px 15px 5px 15px !important;
        white-space: nowrap !important;
    }

    .ag-paging-page-summary-panel {
        left: 10px;
        position: relative;
    }

    .ag-theme-balham .ag-cell {
        white-space: normal !important;
        line-height: inherit;
        overflow-y: auto;
    }

    .ui-menu .ui-menu-item {
        width: 362px !important;
    }

    .multiselect-native-select {
        width: 100%;
    }

    .multiselect-container {
        width: 100%;
    }

    .multiselect-selected-text {
        width: 125px;
    }

    .spn-Yes1 {
        border: 1px solid #e5e5e5;
        border-radius: 10px;
        padding: 0px 5px 0px 5px;
        font-size: 11px;
        font-weight: 600;
        background: #28a745;
        color: white;
    }

    .spn-No1 {
        border: 1px solid #e5e5e5;
        border-radius: 10px;
        padding: 0px 5px 0px 5px;
        font-size: 11px;
        font-weight: 600;
        background: #ef0808;
        color: white;
    }

    .grid_prewrap {
        white-space: pre-wrap !important;
    }
</style>
<input type="hidden" id="hdn_Mng_UserId" />
<div class="container-fluid order-history-section manage-user">
    <input type="hidden" id="hdnDelUserId" />
    <div class="row">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
            <div class="order-title">
                <h2 id="h2_titl">Manage User</h2>
                <div class="main-header-page add-new-btn" style="float: right;" id="btn_AddNew">
                    <a onclick="AddNew();" href="javascript:void();">
                        <h1 style="color: green;">+ Add New</h1>
                    </a>
                </div>
                <div class="main-header-page add-new-btn" style="float: right;display:none;" id="btn_Back">
                    <a onclick="Back();" href="javascript:void();">
                        <h1 style="color: green;">Back</h1>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <div class="order-history-data admin muser gridview">
        <div class="row">
            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
                <div class="col-xl-2 col-lg-6 col-md-6 col-sm-6 col-12 float-left">
                    <div class="order-date common-order">
                        <div class="offer-label">Type:</div>
                        <select id="ddlFilterType" class="form-control common-control" onchange="ddlFilterType();">
                            <option value="">Select an Option</option>
                            <option value="UN" selected="selected">User Name</option>
                            <option value="CM">Company Name</option>
                            <option value="CUN">Customer Name</option>
                            <option value="FPC">Fortune Party Code</option>
                            <option value="CD">Created Date</option>
                            <option value="LLD">Last Login Date</option>
                        </select>
                    </div>
                </div>
                <div class="col-xl-2 col-lg-6 col-md-7 col-sm-6 col-12 float-left" id="divDatetime" style="display:none;">
                    <div class="order-date common-order">
                        <input type="text" name="From" id="txtFromDate" value="" class="offer-input offer-input1" />
                        <input type="text" name="To" id="txtToDate" value="" class="offer-input offer-input1" />
                    </div>
                </div>
                <div class="col-xl-2 col-lg-6 col-md-7 col-sm-6 col-12 float-left" id="divWithoutDatetime">
                    <div class="order-company-name common-order">
                        <input type="text" id="txtCommonName" class="form-control common-control" autocomplete="off">
                    </div>
                </div>
                <div class="col-xl-2 col-lg-6 col-md-6 col-sm-6 col-12 float-left">
                    <div class="order-stone-id common-order">
                        <div class="offer-label">User Type:</div>
                        <select class="form-control common-control" id="ddlUserType">
                        </select>
                    </div>
                </div>
                <div class="col-xl-2 col-lg-6 col-md-6 col-sm-6 col-12 float-left">
                    <div class="order-status common-order">
                        <div class="offer-label"> Active:</div>
                        <select class="form-control common-control" id="ddlIsActive">
                            <option value="">All</option>
                            <option value="1">Yes</option>
                            <option value="0">No</option>
                        </select>
                    </div>
                </div>
                <div class="col-xl-4 col-lg-6 col-md-6 col-sm-6 col-12 float-left">
                    <div class="offer-label">&nbsp;</div>
                    <ul class="offer-inbtn">
                        <li class="mr-2">
                            <button type="button" id="btnSearch" onclick="GetSearch();" class="offer-btn">
                                <i class="fa fa-search" aria-hidden="true"></i>&nbsp;Search
                            </button>
                        </li>
                        <li class="mr-2" style="display:none;">
                            <button type="button" id="Export" onclick="DownloadUser();" class="offer-btn">
                                <i class="fa fa-file-excel-o" aria-hidden="true"></i>&nbsp;Excel
                            </button>
                        </li>
                        <li>
                            <button type="button" id="btnReset" onclick="Reset();" class="offer-btn">
                                <i class="fa fa-refresh" aria-hidden="true"></i>&nbsp;Reset
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="aggrid-section gridview">
        <div class="row">
            <div class="col-xl-12">
                <div class="agGrid-box-main mt-2">
                    <div id="Cart-Gride" class="ag-theme-balham ag-fresh" style="float: left; width: 100%; height: calc(100vh - 225px);"></div>

                </div>
            </div>
        </div>
    </div>

    <div class="row AddEdit" style="display:none;">
        <div class="col-12">
            <div class="myoffer-form full-acform mt-0">
                <div class="row">
                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
                        <div class="row fl-sec-form">
                            <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
                                <div class="offer-label">Company Name: <span class="reqvalidation"> * </span></div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                <div class=" dash-newarrival-select-main text-left w-100 ml-0">
                                    <input tabindex="1" onFocusout="Check_CompName_Exist();" type="text" class="form-control" id="txt_CompanyName" autocomplete="off" maxlength="100">
                                </div>
                            </div>

                            <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
                                <div class="offer-label">Company Address: </div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                <div class=" dash-newarrival-select-main text-left w-100 ml-0">
                                    <input tabindex="2" type="text" class="form-control" id="txt_CompanyAddress" autocomplete="off" maxlength="50">
                                </div>
                            </div>

                            <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
                                <div class="offer-label">User Type: <span class="reqvalidation"> * </span></div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                <div class=" dash-newarrival-select-main text-left w-100 ml-0 cust-main-select">
                                    <select tabindex="3" class="form-control MinWith input-sm" id="ddl_UserType" multiple onchange="ChangeUserType();">
                                    </select>
                                </div>
                            </div>

                            <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
                                <div class="offer-label" id="lbl_fortun_code">Fortune Party Code: </div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                <div class=" dash-newarrival-select-main text-left w-100 ml-0">
                                    <input tabindex="4" type="text" class="form-control" autocomplete="off"
                                           id="txt_FortunePartyCode" maxlength="10"
                                           onFocusout="Check_FortunePartyCode_Exist();">
                                    <label class="active" style="color: red;font-size: 12px;display:none;" id="lblfortunepartycode"></label>
                                </div>
                            </div>

                            <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
                                <div class="offer-label">First Name: <span class="reqvalidation"> * </span></div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                <div class=" dash-newarrival-select-main text-left w-100 ml-0">
                                    <input tabindex="5" type="text" class="form-control" id="txt_FirstName" autocomplete="off" maxlength="50">
                                </div>
                            </div>

                            <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
                                <div class="offer-label">Last Name: <span class="reqvalidation"> * </span></div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                <div class=" dash-newarrival-select-main text-left w-100 ml-0">
                                    <input tabindex="6" type="text" class="form-control" id="txt_LastName" autocomplete="off" maxlength="50">
                                </div>
                            </div>

                            <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
                                <div class="offer-label" id="lbl_assist_by">1<small style="font-weight: 600;">st</small> Assist By: </div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                <div class=" dash-newarrival-select-main text-left w-100 ml-0 cust-main-select">
                                    <select tabindex="7" class="form-control MinWith input-sm" id="ddl_AssistBy">
                                    </select>
                                </div>
                            </div>

                            <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
                                <div class="offer-label">2<small style="font-weight: 600;">nd</small> Assist By: </div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                <div class=" dash-newarrival-select-main text-left w-100 ml-0 cust-main-select">
                                    <select tabindex="8" class="form-control MinWith input-sm" id="ddl_SubAssistBy">
                                    </select>
                                </div>
                            </div>

                            <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
                                <div class="offer-label">Email Id 1: <span class="reqvalidation"> * </span></div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                <div class=" dash-newarrival-select-main text-left w-100 ml-0">
                                    <input tabindex="9" type="email" class="form-control" id="txt_EmailId" autocomplete="off" maxlength="255">
                                </div>
                            </div>

                            <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
                                <div class="offer-label">Email Id 2: </div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                <div class=" dash-newarrival-select-main text-left w-100 ml-0">
                                    <input tabindex="10" type="email" class="form-control" id="txt_EmailId_2" autocomplete="off" maxlength="255">
                                </div>
                            </div>

                            <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
                                <div class="offer-label">Mobile No: <span class="reqvalidation"> * </span></div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                <div class=" dash-newarrival-select-main text-left w-100 ml-0">
                                    <input tabindex="11" type="text" class="form-control" id="txt_MobileNo" autocomplete="off" maxlength="15">
                                </div>
                            </div>

                            <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
                                <div class="offer-label" id="lbl_user_code">User Code: </div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                <div class=" dash-newarrival-select-main text-left w-100 ml-0">
                                    <input tabindex="12" type="text" class="form-control" autocomplete="off"
                                           id="txt_UserCode" maxlength="10"
                                           onFocusout="Check_UserCode_Exist();">
                                    <label class="active" style="color: red;font-size: 12px;display:none;" id="lblUserCode"></label>
                                </div>
                            </div>

                            <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
                                <div class="offer-label">User Name: <span class="reqvalidation"> * </span></div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                <div class=" dash-newarrival-select-main text-left w-100 ml-0">
                                    <input tabindex="13" type="text" class="form-control" id="txt_UserName" autocomplete="off" maxlength="50">
                                </div>
                            </div>

                            <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2 pwd">
                                <div class="offer-label">Password: <span class="reqvalidation"> * </span></div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4 pwd">
                                <div class=" dash-newarrival-select-main text-left w-100 ml-0">
                                    <input tabindex="14" autocomplete="off" type="text" class="form-control pwd-field" id="txt_Password" maxlength="50">
                                    @if (SunriseLabWeb.Helper.SessionFacade.UserSession.IsPrimaryUser == true && SunriseLabWeb.Helper.SessionFacade.UserSession.UserTypeId.Contains("1"))
                                    {
                                        <div class="row" style="margin-top: -5px;float: right;margin-right: -5px;">
                                            <input onchange="tick(this,'')" class="onpristine onuntouched onvalid onempty chkBx" id="ChkPwd" name="ChkPwd" type="checkbox" value="Pwd" style="cursor: pointer;">
                                            <div for="ChkPwd" class="offer-label" style="margin-left: 5px;">
                                                <label for="ChkPwd" style="cursor: pointer;">Show Password</label>
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>

                            <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
                                <div class="offer-label">Active: </div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                <div class=" dash-newarrival-select-main text-left w-100 ml-0">
                                    <label class="cust-chk-bx text-left">
                                        <input tabindex="15" type="checkbox" id="chk_Active" checked="checked">
                                        <span class="cust-chkmark"></span>
                                    </label>
                                </div>
                            </div>

                            <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
                                <div class="offer-label" id="lbl_user_code">Stock: </div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                <div class=" dash-newarrival-select-main text-left w-100 ml-0">
                                    <select tabindex="16" class="form-control MinWith input-sm" id="ddl_Stock" multiple>
                                    </select>
                                    
                                    @*<div class="col-sm-3 col-xs-5 api-plr">
                                        <label class="cust-chk-bx text-left api-check">
                                            <input checked="checked" id="View" name="View" type="checkbox" value="true" class="onpristine onuntouched onvalid onempty UsedFor">
                                            <span>View</span>
                                            <span class="cust-chkmark"></span>
                                        </label>
                                    </div>
                                    <div class="col-sm-3 col-xs-5 api-plr">
                                        <label class="cust-chk-bx text-left api-check">
                                            <input checked="checked" id="Download" name="Download" type="checkbox" value="true" class="onpristine onuntouched onvalid onempty UsedFor">
                                            <span>Download</span>
                                            <span class="cust-chkmark"></span>
                                        </label>
                                    </div>*@
                                </div>
                            </div>

                            <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2">
                                <div class="offer-label">
                                    Restricted IP:
                                    <br />
                                    <span style="font-size: 11px;color: #d62004;">(Add Multiple using Comma Separated) <br> Ex : 000.000.000.000,000.00.000.00</span>
                                </div>
                            </div>
                            <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4">
                                <div class=" dash-newarrival-select-main text-left w-100 ml-0">
                                    <textarea tabindex="17" class="form-control" id="txt_RestrictedIP" maxlength="500" rows="3"></textarea>
                                </div>
                            </div>

                            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mt-2 pt-2 api-plr cateDetail apifilter" style="border-top:1px solid #ddd;">
                                <div class="mb-3 mt-2 pull-right" style="margin-right: 12px;">
                                    <button type="button" onclick="SubUser_AddNewRow('0');" class="offer-btn"><i class="fa fa-plus"></i>Add New Sub User</button>
                                </div>
                                <div style="width: 100%; overflow-x: auto;">
                                    <table id="tbl_SubUser" class="table table-bordered order-history-data o-h-remove common-order" style="display:none;">
                                        <thead style="background-color: #143f58;color: white;">
                                            <tr>
                                                <th style="vertical-align: middle;">Delete</th>
                                                <th style="vertical-align: middle;">Sr. </th>
                                                <th style="vertical-align: middle;">First Name <span style="color:red;">*</span></th>
                                                <th style="vertical-align: middle;">Last Name <span style="color:red;">*</span></th>
                                                <th style="vertical-align: middle;">Mobile No <span style="color:red;">*</span></th>
                                                <th style="vertical-align: middle;">Email Id <span style="color:red;">*</span></th>
                                                <th style="vertical-align: middle;">User Name <span style="color:red;">*</span></th>
                                                <th style="vertical-align: middle;">Password <span style="color:red;">*</span></th>
                                                <th style="vertical-align: middle;">Confirm Password <span style="color:red;">*</span></th>
                                                <th style="vertical-align: middle;">All</th>
                                                <th style="vertical-align: middle;">Search Stock</th>
                                                <th style="vertical-align: middle;">Stock Download</th>
                                                <th style="vertical-align: middle;">Place Order</th>
                                                <th style="vertical-align: middle;">My Cart</th>
                                                <th style="vertical-align: middle;">Order History<br /> - <br />(All)</th>
                                                <th style="vertical-align: middle;">Order History<br /> - <br />(By His User)</th>
                                                <th style="vertical-align: middle;">Order History<br /> - <br />(Download)</th>
                                                <th style="vertical-align: middle;">Order History<br /> - <br />(Show Pricing)</th>
                                            </tr>
                                        </thead>
                                        <tbody style="color: #143f58;" id="tblbody_SubUser" class="fl-sec-form">
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mt-2 pt-2" style="border-top:1px solid #ddd;">
                                <div class="mb-3 mt-2 pull-right" style="margin-left: 6px;">
                                    <button type="button" onclick="Clear();" class="offer-btn"><i class="fa fa-refresh"></i>Reset</button>
                                </div>
                                <div class="mb-3 mt-2 pull-right">
                                    <button type="button" onclick="SaveCompanyUser();" class="offer-btn"><i class="fa fa-save"></i>Save</button>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--------------Remove Country ------------->
<div class="modal fade social-model" id="Remove">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Delete User</h4>
                <button type="button" class="close" onclick="ClearRemoveModel()">&times;</button>
            </div>
            <div class="modal-body">
                <li>Are You Sure You Want To Delete This User ? </li>
            </div>

            <div class="modal-footer">
                <button id="btnSendMail" class="btn btn-primary" type="button" onclick="DeleteUser()">Delete</button>
                <button id="btnremove" class="btn btn-primary" type="button" onclick="ClearRemoveModel()">Cancel</button>
            </div>
        </div>
    </div>
</div>

<div class="modal social-model fade" id="ErrorModel" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog search-width api-filter-popup modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Validation</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="divError" style="max-height: 415px;overflow-y:auto;">

                </div>
            </div>
            <div class="modal-footer">
                <button id="btnremove" class="btn btn-primary" type="button" data-dismiss="modal">Ok</button>
            </div>
        </div>
    </div>
</div>

@section scripts{
    <script src="~/Content/js/wow.min.js"></script>
    <script src="~/Content/js/moment.min.js"></script>
    <script src="~/Content/js/daterangepicker.min.js"></script>
    <script src="~/Content/js/ag-grid-enterprise.min.js"></script>
    <script src="~/Content/js/Pages/Manage.js?version=1"></script>
    <link href="~/Content/Plugins/multiselect/bootstrap-multiselect.css" rel="stylesheet" />
    <script src="~/Content/Plugins/multiselect/bootstrap-multiselect.js"></script>
    <script src="~/Content/js/Pages/detailCellRenderer.js"></script>
}
